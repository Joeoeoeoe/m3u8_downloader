**下载器 URL 解析器使用说明**

解析 URL 字符串，将其中的模板和参数提取出来，并生成最终所需下载的 URL 列表。

**支持的输入格式：**

输入字符串应遵循以下结构：

```
[URL模板] {{占位符1:规则1}} {{占位符2:规则2}} ...
```

*   **URL 模板：** 这是你希望生成最终 URL 的基础，其中可以包含一或多个 `{{占位符名称}}`（注意是双花括号，例如 `{{idx}}`）。
*   **占位符规则：** 在 URL 模板之后，你可以添加一个或多个规则块。每个规则块的格式是 `{{占位符名称:规则内容}}`。
    *   **占位符名称：** 必须与 URL 模板中的 `{{...}}` 内部的名称完全匹配。
    *   **规则内容：** 支持以下两种类型：
        *   **数字范围：** `开始数字-结束数字` (例如 `1-10`)。这会生成从开始到结束（包含）的所有整数。
        *   **逗号分隔列表：** `值1,值2,值3` (例如 `users,products,orders`)。这会生成列表中所有指定的值。

**使用示例：**

**1. 下载编号图片（数字范围）**

如果你想下载 `pic_1.jpg`, `pic_2.jpg` 到 `pic_5.jpg`：

**输入字符串：**
```
https://example.com/images/pic_{{idx}}.jpg {{idx:1-5}}
```

**2. 下载不同类型的数据文件（逗号分隔列表）**

如果你想下载 `data_users.json`, `data_products.json`, `data_orders.json`：

**输入字符串：**
```
https://example.com/data_{{type}}.json {{type:users,products,orders}}
```

**3. 下载跨年份和页码的压缩包（多个占位符组合）**

如果你想下载 `2022/month_1-page_1.zip`, `2022/month_1-page_2.zip` ... 直到 `2023/month_2-page_3.zip` 的所有组合：

**输入字符串：**
```
https://example.com/archive/{{year}}/month_{{month}}-page_{{page}}.zip {{year:2022-2023}} {{month:1,2}} {{page:1-3}}
```

**4. 下载单个普通 URL**

如果你的输入字符串不包含任何 `{{...}}` 形式的规则，它将直接被视为一个普通的 URL。

**输入字符串：**
```
https://example.com/single_file.txt
```

**如何工作（内部逻辑概述）：**

1.  工具会首先根据第一个 `{{` 模式来区分 URL 模板和后面的规则部分。
2.  然后，它会解析所有规则块，识别出占位符名称和对应的数值列表或数字范围。
3.  它会查找 URL 模板中的所有 `{{占位符名称}}`。
4.  最后，它会利用这些占位符的数据，通过笛卡尔积（`itertools.product`）生成所有可能的 URL 组合。

**重要提示：**

*   所有替换都是基于 URL 模板中的 `{{占位符名称}}` 完成的。请确保你在 URL 模板中使用的占位符名称与规则中定义的占位符名称完全一致。
*   如果 URL 模板中有一个 `{{占位符名称}}`，但在规则中没有为其定义任何内容，该占位符将不会被替换，并会原样保留在生成的 URL 中（同时会有一条警告信息）。
*   数字填充：如果你的范围是 `1-100`，`{{idx}}` 对应的生成值将会自动根据最大值 (`100` 有三位) 进行左侧补零（如 `001`, `010`, `100`），以确保位数一致。

---