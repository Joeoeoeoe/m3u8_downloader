{
    "chains": {
        "dismiss_overlays": [
            {
                "type": "click",
                "args": {
                    "selectors": [
                        ".close",
                        ".btn-close",
                        ".popup-close",
                        ".modal-close",
                        ".layui-layer-close",
                        "[class*='close' i]",
                        "[aria-label*='close' i]",
                        "[data-dismiss='modal']"
                    ],
                    "target": "all",
                    "repeat": 1,
                    "wait_min_ms": 80,
                    "wait_max_ms": 180,
                    "max_per_selector": 2,
                    "visible_timeout_ms": 420,
                    "click_timeout_ms": 1000,
                    "wait_after_click_min_ms": 60,
                    "wait_after_click_max_ms": 130
                }
            },
            {
                "type": "press",
                "args": {
                    "key": "Escape"
                }
            },
            {
                "type": "wait",
                "args": {
                    "min_ms": 90,
                    "max_ms": 180
                }
            }
        ],
        "probe_player_ready": [
            {
                "type": "wait_group",
                "args": {
                    "mode": "any",
                    "timeout_ms": 2800,
                    "poll_ms": 100,
                    "group_actions": [
                        {
                            "type": "wait_for_selector",
                            "args": {
                                "selectors": [
                                    "video",
                                    "audio",
                                    "$player",
                                    "iframe[src*='player' i]",
                                    ".player",
                                    ".video-wrap"
                                ],
                                "state": "attached",
                                "match": "any",
                                "target": "all",
                                "timeout_ms": 2600,
                                "poll_ms": 100
                            }
                        },
                        {
                            "type": "wait",
                            "args": {
                                "min_ms": 280,
                                "max_ms": 560
                            }
                        }
                    ]
                }
            },
            {
                "type": "play_media",
                "args": {
                    "target": "all"
                }
            },
            {
                "type": "click",
                "args": {
                    "selectors": [
                        "$player",
                        "video",
                        ".play",
                        ".play-btn",
                        "button[class*='play' i]",
                        "button[aria-label*='play' i]"
                    ],
                    "target": "all",
                    "repeat": 1,
                    "wait_min_ms": 220,
                    "wait_max_ms": 420,
                    "max_per_selector": 2,
                    "visible_timeout_ms": 600,
                    "click_timeout_ms": 1400,
                    "wait_after_click_min_ms": 100,
                    "wait_after_click_max_ms": 220
                }
            },
            {
                "type": "wait",
                "args": {
                    "min_ms": 180,
                    "max_ms": 360
                }
            }
        ],
        "monitor_first_pass": [
            {
                "type": "chain",
                "args": {
                    "name": "dismiss_overlays"
                }
            },
            {
                "type": "chain",
                "args": {
                    "name": "probe_player_ready"
                }
            },
            {
                "type": "scroll",
                "args": {
                    "deltas": [
                        420,
                        -180,
                        760
                    ],
                    "wait_after_scroll_min_ms": 100,
                    "wait_after_scroll_max_ms": 220
                }
            },
            {
                "type": "wait",
                "args": {
                    "min_ms": 180,
                    "max_ms": 320
                }
            }
        ],
        "monitor_retry_pass": [
            {
                "type": "chain",
                "args": {
                    "name": "dismiss_overlays"
                }
            },
            {
                "type": "wait_group",
                "args": {
                    "mode": "any",
                    "timeout_ms": 3200,
                    "poll_ms": 120,
                    "group_actions": [
                        {
                            "type": "wait_for_selector",
                            "args": {
                                "selectors": [
                                    "video",
                                    ".player",
                                    "$player",
                                    "iframe"
                                ],
                                "state": "attached",
                                "match": "any",
                                "target": "all",
                                "timeout_ms": 3000,
                                "poll_ms": 120
                            }
                        },
                        {
                            "type": "wait",
                            "args": {
                                "min_ms": 300,
                                "max_ms": 650
                            }
                        }
                    ]
                }
            },
            {
                "type": "click",
                "args": {
                    "selectors": [
                        "$player",
                        "video",
                        ".play",
                        ".play-btn",
                        "button[class*='play' i]"
                    ],
                    "target": "all",
                    "repeat": 1,
                    "wait_min_ms": 260,
                    "wait_max_ms": 520,
                    "max_per_selector": 2,
                    "visible_timeout_ms": 650,
                    "click_timeout_ms": 1600,
                    "wait_after_click_min_ms": 100,
                    "wait_after_click_max_ms": 230
                }
            },
            {
                "type": "hover",
                "args": {
                    "selectors": [
                        "video",
                        ".player",
                        ".video-wrap"
                    ],
                    "target": "all",
                    "repeat": 1,
                    "max_per_selector": 1,
                    "visible_timeout_ms": 600,
                    "hover_timeout_ms": 1000,
                    "wait_min_ms": 120,
                    "wait_max_ms": 260
                }
            },
            {
                "type": "scroll",
                "args": {
                    "deltas": [
                        900,
                        -360,
                        1200,
                        -700
                    ],
                    "wait_after_scroll_min_ms": 120,
                    "wait_after_scroll_max_ms": 260
                }
            },
            {
                "type": "press",
                "args": {
                    "key": "Space"
                }
            },
            {
                "type": "wait",
                "args": {
                    "min_ms": 300,
                    "max_ms": 700
                }
            }
        ]
    },
    "global": {
        "actions": [
            {
                "type": "log",
                "when": "=1",
                "args": {
                    "message": "monitor first attempt strategy started"
                }
            },
            {
                "type": "chain",
                "when": "=1",
                "args": {
                    "name": "monitor_first_pass"
                }
            },
            {
                "type": "chain",
                "when": ">=2",
                "args": {
                    "name": "monitor_retry_pass"
                }
            }
        ]
    },
    "sites": []
}
